(()=>{"use strict";const t="ekjpkvFUGdF6j29WMEc0QAcNjNKkJbHz",e=t=>{t.classList.contains("d-none")||t.classList.add("d-none")},a=()=>localStorage.getItem("defaultCity"),s=document.querySelector(".change-location"),c=document.querySelector(".card"),n=document.querySelector(".details"),r=document.querySelector(".icon img"),o=document.querySelector(".time"),i=a=>{(async e=>{const a={},s=`?apikey=${t}&q=${e}`,c=await fetch("http://dataservice.accuweather.com/locations/v1/cities/search"+s);if(200!==c.status)throw new Error("Cannot fetch the city data. Status "+c.status);const n=await c.json();if(a.cityData=n[0],void 0===n||0==n.length)return console.log("no such city"),null;const r=`${n[0].Key}?apikey=${t}`,o=await fetch("http://dataservice.accuweather.com/currentconditions/v1/"+r);if(200!==o.status)throw new Error("Cannot fetch the weather data. Status "+o.status);const i=await o.json();return a.weatherData=i[0],a})(a).then((t=>{var a;t?(s.reset(),(a=c).classList.contains("d-none")&&a.classList.remove("d-none"),((t,e,a,s)=>{const c=t.cityData,n=t.weatherData;e.children[0].textContent=c.EnglishName,e.children[1].textContent=n.WeatherText,e.children[2].children[0].textContent=n.Temperature.Metric.Value,t.weatherData.IsDayTime?s.setAttribute("src","assets/img/day.svg"):s.setAttribute("src","assets/img/night.svg"),a.setAttribute("src",`assets/img/icons/${t.weatherData.WeatherIcon}.svg`)})(t,n,r,o),(t=>{localStorage.setItem("defaultCity",t.cityData.EnglishName)})(t)):e(c)})).catch((t=>{e(c),console.log(t)}))};a()&&i(a()),s.addEventListener("submit",(t=>{t.preventDefault(),i(t.target.city.value.trim())}))})();